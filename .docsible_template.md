# Ansible Role: {{ role.name }}

{% if role.meta and role.meta.galaxy_info and role.meta.galaxy_info.description %}
{{ role.meta.galaxy_info.description }}
{% else %}
No description available
{% endif %}

## Table of Contents

- [Requirements](#requirements)
- [Dependencies](#dependencies)
- [Role Variables](#role-variables)
- [Task Overview](#task-overview)
- [Example Playbook](#example-playbook)
- [Documentation Maintenance](#documentation-maintenance)
- [License](#license)
- [Author Information](#author-information)

## Requirements

{% if role.meta and role.meta.galaxy_info %}
{% if role.meta.galaxy_info.min_ansible_version %}
- Ansible >= {{ role.meta.galaxy_info.min_ansible_version }}
{% else %}
- Ansible >= 2.9
{% endif %}
{% if role.meta.galaxy_info.platforms %}
- Supported platforms:
{%- for platform in role.meta.galaxy_info.platforms %}
  - {{ platform.name }}{% if platform.versions %} ({{ platform.versions | join(', ') }}){% endif %}
{%- endfor %}
{% endif %}
{% else %}
- Ansible >= 2.9
{% endif %}

## Dependencies

{% if role.meta and role.meta.galaxy_info and role.meta.galaxy_info.documented_requirements and role.meta.galaxy_info.documented_requirements | length > 0 %}
This role requires the following roles and collections:

{% set ext_roles = [] %}
{% set ext_collections = [] %}
{% for dep in role.meta.galaxy_info.documented_requirements %}
  {% if dep.src %}
    {% set _ = ext_roles.append(dep) %}
  {% elif dep.name %}
    {% set _ = ext_collections.append(dep) %}
  {% endif %}
{% endfor %}

{% if ext_roles %}
**Roles:**
{% for role_dep in ext_roles %}
- [{{ role_dep.name | default(role_dep.src.split('/')[-1].replace('.git', '')) }}]({{ role_dep.src }}){% if role_dep.version %} (version: {{ role_dep.version }}){% endif %}
{% endfor %}
{% endif %}

{% if ext_collections %}
**Collections:**
{% for collection in ext_collections %}
- `{{ collection.name }}`{% if collection.version %} (>= {{ collection.version }}){% endif %}
{% endfor %}
{% endif %}

To install all dependencies:
```bash
ansible-galaxy install -r meta/install_requirements.yml
```
{% else %}
No dependencies defined.

To install external requirements:
```bash
ansible-galaxy install -r meta/install_requirements.yml
```
{% endif %}

## Role Variables

{% if role.defaults %}
{% for file in role.defaults %}
### File: `defaults/{{ file.file }}`

| Variable | Default Value | Description |
|----------|---------------|-------------|
{%- for var, data in file.data.items() %}
| `{{ var }}` | `{{ data.value }}` | {{ data.description | default('No description') }} |
{%- endfor %}

{% endfor %}
{% else %}
No default variables defined.
{% endif %}

## Task Overview

{% if role.tasks %}
This role performs the following tasks:

{% for task_file in role.tasks %}
### `{{ task_file.file }}`

{% for task in task_file.tasks %}
{%- if task.name %}
- **{{ task.name }}**
  {%- if task.description %}
  - {{ task.description }}
  {%- endif %}
{%- endif %}
{%- endfor %}

{% endfor %}
{% else %}
No tasks documented.
{% endif %}

## Example Playbook

```yaml
---
- hosts: all
  become: yes
  roles:
    - role: {{ role.name }}
{% if role.defaults and role.defaults[0].data %}
      vars:
{%- for var, data in (role.defaults[0].data.items() | list)[:3] %}
        {{ var }}: {{ data.value }}
{%- endfor %}
{% endif %}
```

## Documentation Maintenance

### Updating Dependencies

1. **Update** `meta/main.yml`:
   ```yaml
   documented_requirements:
     - src: https://github.com/user/role.git
       version: master
     - name: collection.name
       version: 1.0.0
   ```

2. **Sync** `meta/install_requirements.yml` with the same requirements

3. **Regenerate** documentation:
   ```bash
   pre-commit run --all-files
   ```

### Template Updates

- Edit `.docsible_template.md` for structure changes
- Test with: `docsible --role . --md-template .docsible_template.md -nob -com -tl`
- Commit both template and generated README.md

### Quick Checklist

When updating dependencies:
- [ ] Add to `meta/main.yml` â†’ `documented_requirements`
- [ ] Add to `meta/install_requirements.yml`
- [ ] Run `pre-commit run --all-files`
- [ ] Verify generated README.md
- [ ] Commit all changes

## License

{% if role.meta and role.meta.galaxy_info and role.meta.galaxy_info.license %}
{{ role.meta.galaxy_info.license }}
{% else %}
MIT
{% endif %}

## Author Information

{% if role.meta and role.meta.galaxy_info and role.meta.galaxy_info.author %}
**Author:** {{ role.meta.galaxy_info.author }}
{% else %}
**Author:** Gorkem Korkmaz
{% endif %}

{% if role.meta and role.meta.galaxy_info and role.meta.galaxy_info.company %}
**Company:** {{ role.meta.galaxy_info.company }}
{% endif %}

**GitHub:** [gkorkmaz](https://github.com/gkorkmaz)

---
*This documentation was automatically generated using [docsible](https://github.com/zbohm/docsible).*
